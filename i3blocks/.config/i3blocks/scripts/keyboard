#!/bin/bash
# Get current keyboard layout
if command -v xkb-switch &>/dev/null; then
    xkb-switch -p | tr '[:lower:]' '[:upper:]'
else
    # Fallback
    layouts=$(setxkbmap -query | awk '/layout/{print $2}')
    IFS=',' read -ra LAYOUTS <<< "$layouts"
    if xset -q | grep -q "Group 2:.*on"; then
        echo "${LAYOUTS[1]^^}"
    else
        echo "${LAYOUTS[0]^^}"
    fi
fi
